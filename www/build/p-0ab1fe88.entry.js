import{r as e,h as a}from"./p-20a95a7f.js";const t=":host{display:flex;justify-content:center;align-items:center;font-family:'Helvetica Neue', Arial, sans-serif;width:100vw;height:100vh;margin:0;background-color:#f0f2f5}.chat-container{display:flex;flex-direction:column;width:90%;max-width:900px;height:80%;max-height:620px;background-color:#ffffff;border-radius:15px;overflow:hidden;box-shadow:0 6px 20px rgba(0, 0, 0, 0.15)}.chat-header{background:linear-gradient(45deg, #007bff, #0056b3);color:white;text-align:center;padding:15px;font-size:1.5em;font-weight:bold}.chat-messages{flex:1;padding:20px;overflow-y:auto;background-color:#f9f9f9;display:flex;flex-direction:column;gap:10px}.chat-message{padding:15px;border-radius:12px;max-width:80%;position:relative;font-size:1em;line-height:1.4;box-shadow:0 3px 10px rgba(0, 0, 0, 0.1)}.chat-message.ai{background-color:#e1f5fe;align-self:flex-start;border:1px solid #b3e5fc}.chat-message.user{background-color:#d1e7dd;align-self:flex-end;border:1px solid #a3d5c3}.chat-card-group{display:flex;flex-direction:row;overflow-x:auto;overflow-y:hidden;gap:15px;padding:10px;background-color:#ffffff;border:1px solid #ddd;min-height:380px;max-height:380px;box-sizing:border-box}.chat-card-group::-webkit-scrollbar{height:8px}.chat-card-group::-webkit-scrollbar-thumb{background-color:#007bff;border-radius:4px}.chat-card{width:345px;height:350px;min-width:250px;min-height:300px;border-radius:8px;background-color:#ffffff;border:1px solid #e0e0e0;box-shadow:0 3px 10px rgba(0, 0, 0, 0.05);display:flex;flex-direction:column;align-items:center;transition:transform 0.3s, box-shadow 0.3s}.chat-card:hover{transform:translateY(-5px);box-shadow:0 6px 20px rgba(0, 0, 0, 0.15)}.chat-card img{max-width:100%;height:auto;border-radius:6px;margin:5px 0;object-fit:contain}.chat-card h4{margin:5px 0;font-size:0.9em;font-weight:600;color:#333;text-align:center}.chat-card a{margin-top:5px;padding:6px 12px;background-color:#007bff;color:white;border-radius:6px;text-decoration:none;font-size:0.9em;font-weight:bold}.chat-card a:hover{background-color:#0056b3}.chat-message.photo-search{display:flex;justify-content:center;align-items:center;padding:10px;align-self:flex-end;}.chat-message.photo-search img{width:300px;height:auto;border-radius:8px;object-fit:cover;}.chat-message.unknown{background:#f8f8f8;border:1px dashed #ccc;padding:10px;margin:10px 0}.chat-message.image img{max-width:100%;border-radius:5px}.chat-card-group{display:flex;gap:10px;margin:10px 0}";const r=t;const o=class{constructor(a){e(this,a);this.chatMessages=[];this.isLoading=true;this.errorMessage=null}async componentWillLoad(){try{const e=await fetch("https://timmy-io-smd-create-smd-creates-projects.vercel.app/api/conversation");if(e.ok){const a=await e.json();this.chatMessages=a.chat||[]}else{this.errorMessage="Failed to load chat messages."}}catch(e){this.errorMessage="Error fetching chat messages."}finally{this.isLoading=false}}render(){return a("div",{key:"1746884c9d88b81a19179e75f8e758cc9fe58768",class:"chat-container"},a("div",{key:"0fb52b37f727eb324e7601d38c7d578ed629ae17",class:"chat-header"},"Timmy AI"),a("div",{key:"f451905d20f316eecc495ddbcfa9262e6324ab9e",class:"chat-messages"},this.isLoading?a("div",{class:"loading"},"Loading messages..."):this.errorMessage?a("div",{class:"error"},this.errorMessage):this.renderChatMessages()))}renderChatMessages(){const e=[];let t=false;let r=[];this.chatMessages.forEach(((o,i)=>{const{messageType:s,photoSearchImage:c,messages:d}=o;d.forEach(((o,s)=>{var c;if(o.type==="card"||o.type==="unknown"&&((c=o.content)===null||c===void 0?void 0:c.cards)){if(!t){t=true;r=[]}const e=o.type==="card"?[o.content]:o.content.cards;e.forEach(((e,t)=>{var o,c;r.push(a("div",{class:"chat-card",key:`card-${i}-${s}-${t}`},a("h4",null,((o=e.title)===null||o===void 0?void 0:o.text)||"Untitled Card"),a("img",{src:e.imageUrl||"",alt:((c=e.title)===null||c===void 0?void 0:c.text)||"Image"}),a("a",{href:e.url||"#",target:"_blank",rel:"noopener noreferrer"},"View Product")))}))}else if(o.type==="text"||o.type==="image"||o.type==="unknown"){if(t){e.push(a("div",{class:"chat-card-group",key:`group-${e.length}`},r));t=false}if(o.type==="text"){e.push(a("div",{class:`chat-message ${o.isAIReply?"ai":"user"}`,key:`text-${i}-${s}`},o.content))}else if(o.type==="image"){e.push(a("div",{class:"chat-message image",key:`image-${i}-${s}`},a("img",{src:o.content,alt:"Image message"})))}else if(o.type==="unknown"){e.push(a("div",{class:"chat-message unknown",key:`unknown-${i}-${s}`},a("pre",null,JSON.stringify(o.content,null,2))))}}}));if(s==="photo-search"&&c){e.push(a("div",{class:"chat-message photo-search",key:`photo-search-${i}`},a("img",{src:c,alt:"Photo search result"})))}if(t){e.push(a("div",{class:"chat-card-group",key:`group-${e.length}`},r))}}));return e}};o.style=r;export{o as my_component};
//# sourceMappingURL=p-0ab1fe88.entry.js.map