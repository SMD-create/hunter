{"file":"my-component.entry.esm.js","mappings":"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","names":[],"sources":["src/components/my-component/my-component.css?tag=my-component&encapsulation=shadow","src/components/my-component/my-component.tsx"],"sourcesContent":[":host {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'Helvetica Neue', Arial, sans-serif;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  margin: 0;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 90%;\r\n  max-width: 900px;\r\n  height: 80%;\r\n  max-height: 620px;\r\n  background-color: #ffffff;\r\n  border-radius: 15px;\r\n  overflow: hidden;\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.chat-header {\r\n  background: linear-gradient(45deg, #007bff, #0056b3);\r\n  color: white;\r\n  text-align: center;\r\n  padding: 15px;\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n  background-color: #f9f9f9;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.chat-message {\r\n  padding: 15px;\r\n  border-radius: 12px;\r\n  max-width: 80%;\r\n  position: relative;\r\n  font-size: 1em;\r\n  line-height: 1.4;\r\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.chat-message.ai {\r\n  background-color: #e1f5fe;\r\n  align-self: flex-start;\r\n  border: 1px solid #b3e5fc;\r\n}\r\n\r\n.chat-message.user {\r\n  background-color: #d1e7dd;\r\n  align-self: flex-end;\r\n  border: 1px solid #a3d5c3;\r\n}\r\n\r\n/* Chat card group container with horizontal scrolling */\r\n/* Ensure the chat-card-group maintains its height */\r\n.chat-card-group {\r\n  display: flex;\r\n  flex-direction: row; /* Horizontal alignment */\r\n  overflow-x: auto; \r\n  overflow-y: hidden; /* Horizontal scrolling */\r\n  gap: 15px; /* Spacing between cards */\r\n  padding: 10px;\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  min-height: 380px; /* Ensure it doesn't shrink smaller than the card height */\r\n  max-height: 380px; /* Prevent it from expanding beyond the card height */\r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\n/* Custom scrollbar for horizontal scrolling */\r\n.chat-card-group::-webkit-scrollbar {\r\n  height: 8px;\r\n}\r\n\r\n.chat-card-group::-webkit-scrollbar-thumb {\r\n  background-color: #007bff;\r\n  border-radius: 4px;\r\n}\r\n\r\n.chat-card {\r\n  width: 345px;  /* Fixed width for product cards */\r\n  height: 350px; /* Fixed height for product cards */\r\n  min-width: 250px;  /* Set minimum width */\r\n  min-height: 300px; /* Set minimum height *//* Set fixed height for product cards */\r\n  border-radius: 8px;\r\n  background-color: #ffffff;\r\n  border: 1px solid #e0e0e0;\r\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  transition: transform 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.chat-card:hover {\r\n  transform: translateY(-5px); /* Lift card on hover */\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.chat-card img {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 6px;\r\n  margin: 5px 0;\r\n  object-fit: contain;\r\n}\r\n\r\n.chat-card h4 {\r\n  margin: 5px 0;\r\n  font-size: 0.9em;\r\n  font-weight: 600;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.chat-card a {\r\n  margin-top: 5px;\r\n  padding: 6px 12px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border-radius: 6px;\r\n  text-decoration: none;\r\n  font-size: 0.9em;\r\n  font-weight: bold;\r\n}\r\n\r\n.chat-card a:hover {\r\n  background-color: #0056b3;\r\n}\r\n","import { Component, JSX, State, h } from \"@stencil/core\";\r\nimport Swiper from 'swiper';\r\n\r\n<link\r\n  rel=\"stylesheet\"\r\n  href=\"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css\"\r\n/>\r\n\r\ninterface ChatMessage {\r\n  type: string; // 'text', 'card', 'image', etc.\r\n  content: any; // Can be string for text or an object for cards\r\n  isAIReply?: boolean; // Optional property to indicate if the message is from AI\r\n}\r\n\r\n@Component({\r\n  tag: \"my-component\",\r\n  styleUrl: \"my-component.css\",\r\n  shadow: true,\r\n})\r\nexport class MyComponent {\r\n  @State() chatMessages: ChatMessage[] = [];\r\n  @State() isLoading: boolean = true; // Loading state\r\n  @State() errorMessage: string | null = null; // Error state\r\n\r\n  async componentWillLoad() {\r\n    try {\r\n      const response = await fetch(\r\n        \"https://timmy-io-smd-create-smd-creates-projects.vercel.app/api/conversation\"\r\n      );\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        this.chatMessages = data.chat || []; // Safeguard in case `chat` is undefined\r\n      } else {\r\n        console.error(\"Error fetching chat messages\");\r\n        this.errorMessage = \"Failed to load chat messages.\";\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      this.errorMessage = \"Error fetching chat messages.\";\r\n    } finally {\r\n      this.isLoading = false; // End loading state\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"chat-container\">\r\n        <div class=\"chat-header\">Timmy AI</div>\r\n\r\n        <div class=\"chat-messages\">\r\n          {this.isLoading ? (\r\n            <div class=\"loading\">Loading messages...</div>\r\n          ) : this.errorMessage ? (\r\n            <div class=\"error\">{this.errorMessage}</div>\r\n          ) : (\r\n            this.renderChatMessages()\r\n          )}\r\n        </div>\r\n        <script src=\"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js\"></script>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderChatMessages() {\r\n    const messageGroups: JSX.Element[] = [];\r\n    let isGrouping = false;\r\n    let group: JSX.Element[] = [];\r\n\r\n    this.chatMessages.forEach((msg, index) => {\r\n      if (msg.type === \"card\") {\r\n        if (!isGrouping) {\r\n          // Start grouping if the first card is encountered\r\n          isGrouping = true;\r\n          group = [];\r\n        }\r\n        group.push(\r\n          <div class=\"chat-card\" key={`card-${index}`}>\r\n            <h4>{msg.content.title.text}</h4>\r\n            <img\r\n              src={msg.content.imageUrl}\r\n              alt={msg.content.title.text}\r\n            />\r\n            <a\r\n              href={msg.content.productUrl}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              View Product\r\n            </a>\r\n          </div>\r\n        );\r\n      } else if (msg.type === \"text\" || msg.type === \"image\") {\r\n        if (isGrouping) {\r\n          // Stop grouping if a text or image message is encountered\r\n          messageGroups.push(\r\n            <div class=\"chat-card-group\" key={`group-${messageGroups.length}`}>\r\n              {group}\r\n            </div>\r\n          );\r\n          isGrouping = false; // Reset grouping status\r\n        }\r\n\r\n        if (msg.type === \"text\") {\r\n          messageGroups.push(\r\n            <div\r\n              class={`chat-message ${msg.isAIReply ? \"ai\" : \"user\"}`}\r\n              key={`text-${index}`}\r\n            >\r\n              {msg.content}\r\n            </div>\r\n          );\r\n        } else if (msg.type === \"image\") {\r\n          messageGroups.push(\r\n            <div class=\"chat-message\" key={`image-${index}`}>\r\n              <img src={msg.content} alt=\"Image message\" />\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    // Add any remaining grouped cards if the loop ended while still grouping\r\n    if (isGrouping) {\r\n      messageGroups.push(\r\n        <div class=\"chat-card-group swiper\" key={`group-${messageGroups.length}`}>\r\n          {group}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return messageGroups;\r\n  }\r\n}\r\n"],"version":3}